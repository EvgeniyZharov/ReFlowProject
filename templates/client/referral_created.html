{% extends "client/client.html" %}

{% block content %}
<div class="referral-created">
    <h1>–í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –≥–æ—Ç–æ–≤–∞!</h1>

    <div class="referral-card">
        <div class="product-info">
            <h2>{{ product.title }}</h2>
            <p class="price">{{ product.price }} ‚ÇΩ</p>
            <p class="commission">–í–∞—à–∞ –∫–æ–º–∏—Å—Å–∏—è: {{ product.referral_percent }}%</p>
        </div>

        <div class="referral-link">
            <input type="text" value="{{ referral.link }}" id="referral-link" readonly>
            <button onclick="copyToClipboard('referral-link')" class="btn btn-copy">
                –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
            </button>
        </div>

        <div class="qr-code">
            <img src="{{ referral.qr_code }}" alt="QR-–∫–æ–¥">
            <p>–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞</p>
        </div>

        <div class="social-share">
            <p>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è:</p>
            <a href="#" class="social-icon">üì±</a>
            <a href="#" class="social-icon">üìß</a>
            <a href="#" class="social-icon">üìò</a>
            <a href="#" class="social-icon">üì±</a>
        </div>
    </div>

    <a href="{{ url_for('client_referrals') }}" class="btn btn-back">
        –ö —Å–ø–∏—Å–∫—É —Å—Å—ã–ª–æ–∫
    </a>
</div>

<script>
function copyToClipboard(elementId) {
    const copyText = document.getElementById(elementId);
    copyText.select();
    document.execCommand("copy");

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    const btn = document.querySelector('.btn-copy');
    const originalText = btn.textContent;
    btn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';

    setTimeout(() => {
        btn.textContent = originalText;
    }, 2000);
}
</script>
{% endblock %}